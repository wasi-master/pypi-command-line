
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://wasi-master.github.io/pypi-command-line/notes/">
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.5">
    
    
      
        <title>Notes - pypi-command-line</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.be71726b.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#notes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="pypi-command-line" class="md-header__button md-logo" aria-label="pypi-command-line" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            pypi-command-line
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Notes
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/wasi-master/pypi-command-line" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    wasi-master/pypi-command-line
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../install/" class="md-tabs__link">
      Installation
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../usage/" class="md-tabs__link">
      Usage
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      Notes
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../smart_features/" class="md-tabs__link">
      Smart Features
    </a>
  </li>

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="pypi-command-line" class="md-nav__button md-logo" aria-label="pypi-command-line" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    pypi-command-line
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/wasi-master/pypi-command-line" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    wasi-master/pypi-command-line
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        Usage
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Notes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Notes
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#optimizations" class="md-nav__link">
    Optimizations
  </a>
  
    <nav class="md-nav" aria-label="Optimizations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imports-outside-top-level" class="md-nav__link">
    Imports outside top level
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compiling-regex-in-regex-search" class="md-nav__link">
    Compiling regex in regex-search
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#speedups" class="md-nav__link">
    Speedups
  </a>
  
    <nav class="md-nav" aria-label="Speedups">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shellingham" class="md-nav__link">
    shellingham[↑]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lxml" class="md-nav__link">
    lxml[↑]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requests-cache" class="md-nav__link">
    requests-cache[↑]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rapidfuzz" class="md-nav__link">
    rapidfuzz[↑]
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    Dependencies
  </a>
  
    <nav class="md-nav" aria-label="Dependencies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rich" class="md-nav__link">
    Rich
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typer" class="md-nav__link">
    Typer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requests" class="md-nav__link">
    Requests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#questionary" class="md-nav__link">
    Questionary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humanize" class="md-nav__link">
    Humanize
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bs4-beautifulsoup" class="md-nav__link">
    bs4 (BeautifulSoup)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thefuzz" class="md-nav__link">
    TheFuzz
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rich-rst" class="md-nav__link">
    Rich RST
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packaging" class="md-nav__link">
    Packaging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependency-installation-notes" class="md-nav__link">
    Dependency Installation Notes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cache" class="md-nav__link">
    Cache
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../smart_features/" class="md-nav__link">
        Smart Features
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="notes">Notes<a class="headerlink" href="#notes" title="Permanent link">&para;</a></h1>
<p>This page explains certain aspects of the code.</p>
<h2 id="optimizations">Optimizations<a class="headerlink" href="#optimizations" title="Permanent link">&para;</a></h2>
<h3 id="imports-outside-top-level">Imports outside top level<a class="headerlink" href="#imports-outside-top-level" title="Permanent link">&para;</a></h3>
<blockquote>
<p>import statements can be executed just about anywhere. It's often useful to place them inside functions to restrict their visibility and/or reduce initial startup time. Although Python's interpreter is optimized to not import the same module multiple times, repeatedly executing an import statement can seriously affect performance in some circumstances.</p>
</blockquote>
<p>From <a href="https://wiki.python.org/moin/PythonSpeed/PerformanceTips#Import_Statement_Overhead">https://wiki.python.org/moin/PythonSpeed/PerformanceTips#Import_Statement_Overhead</a></p>
<p>Because of this, I've added imports in each function that needs them instead of adding them at the top. since the user is only gonna run one single command the imports required for other commands don't need to be imported. Doing this saves around 500ms.</p>
<h3 id="compiling-regex-in-regex-search">Compiling regex in <code>regex-search</code><a class="headerlink" href="#compiling-regex-in-regex-search" title="Permanent link">&para;</a></h3>
<p>We compile the regex because it's almost twice as fast.
<img alt="6.01 vs 3.92" src="https://i.imgur.com/m4AFfEV.png" title="Times for compiled vs non compiled regex" /></p>
<details>
<summary>Code</summary>

![Source code for non compiled regex](https://i.imgur.com/SWlo2zA.png "Source code for non compiled regex")
![Source code for compiled regex](https://i.imgur.com/Wr8bWUM.png "Source code for compiled regex")

</details>

<h3 id="speedups">Speedups<a class="headerlink" href="#speedups" title="Permanent link">&para;</a></h3>
<p>You may have seen that you can do <code class="highlight">pip install pypi-command-line<span class="o">[</span>speedups<span class="o">]</span></code> and you may have wondered what that actually does.
If you see the source code you can see these lines</p>
<script src="https://emgithub.com/embed.js?target=https%3A%2F%2Fgithub.com%2Fwasi-master%2Fpypi-command-line%2Fblob%2Fmain%2Fsetup.py%23L52-L58&style=atom-one-dark&showBorder=on&showLineNumbers=on&showFileMeta=on&showCopy=off"></script>

<p>Now I think those comments explain what those do pretty well but here's a detailed explanation</p>
<h4 id="shellingham"><strong>shellingham</strong><sup>[<a title="Link to shellingham's PyPI page" href="https://pypi.org/project/shellingham/" target="_blank">↑</a>]</sup><a class="headerlink" href="#shellingham" title="Permanent link">&para;</a></h4>
<p>This does not really speed up anything but adds auto shell detection for autocomplete installation using the <code class="highlight">--install-completion</code> command. This technically lowers the amount of time taken to install autocompletion because it makes it so that you don't have to manually provide what terminal/shell you're using</p>
<h4 id="lxml"><strong>lxml</strong><sup>[<a title="Link to lxml's PyPI page" href="https://pypi.org/project/lxml/" target="_blank">↑</a>]</sup><a class="headerlink" href="#lxml" title="Permanent link">&para;</a></h4>
<p>This is an alternative for the built-in <a href="https://docs.python.org/3/library/html.parser.html">html.parser</a> that comes with python. There is also <a href="https://pypi.org/project/html5lib/"><code>html5lib</code></a></p>
<details>
<summary>Table with parser comparisons supported by BeautifulSoup</summary>

| Parser               | Typical usage                                                      | Advantages                                                                                                             | Disadvantages                                                      |
| -------------------- | ------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------ |
| Python's html.parser | `BeautifulSoup(markup, "html.parser")`                             | <ul><li>Batteries included </li><li>Decent speed </li><li>Lenient (As of Python 2.7.3 and 3.2.)</li></ul>              | <ul><li>Not as fast as lxml, less lenient than html5lib.</li></ul> |
| lxml's HTML parser   | `BeautifulSoup(markup, "lxml")`                                    | <ul><li>Very fast</li><li>Lenient</li></ul>                                                                            | <ul><li>External C dependency</li></ul>                            |
| lxml's XML parser    | `BeautifulSoup(markup, "lxml-xml")` `BeautifulSoup(markup, "xml")` | <ul><li>Very fast </li><li>The only currently supported XML parser</li></ul>                                           | <ul><li>External C dependency</li></ul>                            |
| html5lib             | `BeautifulSoup(markup, "html5lib")`                                | <ul><li>Extremely lenient </li><li>Parses pages the same way a web browser does </li><li>Creates valid HTML5</li></ul> | <ul><li>Very slow</li><li>External Python dependency</li></ul>     |

From <https://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser>
</details>

<p>If this is not installed it uses <a href="https://docs.python.org/3/library/html.parser.html">html.parser</a> for html and <a href="https://docs.python.org/3/library/xml.etree.elementtree.html">xml.etree.ElementTree</a> for xml.</p>
<ul>
<li>
<p>For XML</p>
<p><code>lxml</code> is more than 10 times faster <code>than xml.etree.ElementTree</code><sup>[<a title="Reference" href="https://lxml.de/performance.html#:~:text=lxml%20is%20still%20more%20than%2010%20times%20as%20fast%20as%20the%20much%20improved%20elementtree%201.3%20in%20recent%20python%20versions" target="_blank">‾</a>]</sup></p>
</li>
<li>
<p>For HTML</p>
<p><code>lxml</code> is more than 5 times faster than <code>html.parser</code> <sup>[<a title="Reference" href="https://www.ianbicking.org/blog/2008/03/python-html-parser-performance.html#:~:text=from%C2%A0python.org.-,parsing,-The%20first%20test" target="_blank">‾</a>]</sup></p>
</li>
</ul>
<h4 id="requests-cache"><strong>requests-cache</strong><sup>[<a title="Link to requests-cache's PyPI page" href="https://pypi.org/project/requests-cache/" target="_blank">↑</a>]</sup><a class="headerlink" href="#requests-cache" title="Permanent link">&para;</a></h4>
<p>This allows http requests to be faster by caching<sup>[<a title="Caching is a process that stores multiple copies of data or files in a temporary storage location—or cache—so they can be accessed faster." href="https://aws.amazon.com/caching/" target="_blank">?</a>]</sup> them</p>
<h4 id="rapidfuzz"><strong>rapidfuzz</strong><sup>[<a title="Link to rapidfuzz's PyPI page" href="https://pypi.org/project/rapidfuzz/" target="_blank">↑</a>]</sup><a class="headerlink" href="#rapidfuzz" title="Permanent link">&para;</a></h4>
<p>This allows rapid fuzzy string matching around 20 times faster than thefuzz</p>
<h2 id="dependencies">Dependencies<a class="headerlink" href="#dependencies" title="Permanent link">&para;</a></h2>
<h3 id="rich"><a href="https://github.com/willmcgugan/rich">Rich</a><a class="headerlink" href="#rich" title="Permanent link">&para;</a></h3>
<p>This allows the beautiful formatting that you can see when using the commands. <a href="https://rich.readthedocs.io/en/latest/markup.html">Colors</a>, <a href="https://rich.readthedocs.io/en/latest/tables.html">Tables</a>, <a href="https://rich.readthedocs.io/en/latest/panel.html">Panels</a>, <a href="https://rich.readthedocs.io/en/latest/progress.html">Progress Bars</a> and much more.</p>
<h3 id="typer"><a href="https://typer.tiangolo.com">Typer</a><a class="headerlink" href="#typer" title="Permanent link">&para;</a></h3>
<p>This allows the command line interface to work properly. Although it's just a wrapper over <a href="https://click.palletsprojects.com/en/8.0.x/"><code>click</code></a> and the main stuff is done by click. typer adds some extra features over click such as autocompletion. That's why I've chosen typer over click.</p>
<h3 id="requests"><a href="https://requests.readthedocs.io/en/master/">Requests</a><a class="headerlink" href="#requests" title="Permanent link">&para;</a></h3>
<p>For HTTP web requests</p>
<h3 id="questionary"><a href="https://questionary.readthedocs.io/en/stable/">Questionary</a><a class="headerlink" href="#questionary" title="Permanent link">&para;</a></h3>
<p>For cool prompts.</p>
<h3 id="humanize"><a href="https://python-humanize.readthedocs.io/en/latest/">Humanize</a><a class="headerlink" href="#humanize" title="Permanent link">&para;</a></h3>
<p>For human readable data</p>
<h3 id="bs4-beautifulsoup"><a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">bs4 (BeautifulSoup)</a><a class="headerlink" href="#bs4-beautifulsoup" title="Permanent link">&para;</a></h3>
<p>For parsing html and xml data</p>
<h3 id="thefuzz"><a href="https://github.com/seatgeek/thefuzz">TheFuzz</a><a class="headerlink" href="#thefuzz" title="Permanent link">&para;</a></h3>
<p>For fuzzy string matching</p>
<h3 id="rich-rst"><a href="https://pypi.org/project/rich-rst/">Rich RST</a><a class="headerlink" href="#rich-rst" title="Permanent link">&para;</a></h3>
<p>For pretty-printing reStructuredText descriptions</p>
<h3 id="packaging"><a href="https://packaging.pypa.io/en/latest/">Packaging</a><a class="headerlink" href="#packaging" title="Permanent link">&para;</a></h3>
<p>For version parsing</p>
<h2 id="dependency-installation-notes">Dependency Installation Notes<a class="headerlink" href="#dependency-installation-notes" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Applicable Commands</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>typer</td>
<td>meta</td>
<td></td>
</tr>
<tr>
<td>rich</td>
<td>all</td>
<td></td>
</tr>
<tr>
<td>requests</td>
<td>meta</td>
<td></td>
</tr>
<tr>
<td>humanize</td>
<td>all</td>
<td></td>
</tr>
<tr>
<td>bs4</td>
<td>search, new-packages (optional), new-releases (optional)</td>
<td>If lxml and this both are installed then this is used for new-packages and new-releases and can provide up to a 5x improvement in speed and avoid a bug where the descriptions are not shown.</td>
</tr>
<tr>
<td>questionary</td>
<td>rtfd, browse, description (optional)</td>
<td>For the description command, if the pypi page doesn't have a descripton, if it has mentions a single github repository then this is not required but if it mentions multiple github repos then you'll need to select one therefore this will be required</td>
</tr>
<tr>
<td>thefuzz (optional)</td>
<td>meta (command suggestions when an invalid command is used)</td>
<td>If this is not available then it uses difflib</td>
</tr>
<tr>
<td>rich-rst</td>
<td>description (sometimes)</td>
<td>This will only be required in the <code>description</code> command if the description is in reStructuredText</td>
</tr>
<tr>
<td>shellingham (optional)</td>
<td>--install-completion</td>
<td>This is only required to install autocomplete for the current shell. without this you'd have to manually pass the shell as an argument to <code>install-completion</code></td>
</tr>
<tr>
<td>lxml (optional)</td>
<td>search, new-packages (optional), new-releases (optional)</td>
<td>For the search command this is a must have. for the new-packages and new-releases command this can provide up to 5x speed improvement and avoid a bug where the descriptions are not shown.</td>
</tr>
<tr>
<td>requests-cache (optional)</td>
<td>all</td>
<td></td>
</tr>
<tr>
<td>rapidfuzz (optional)</td>
<td>meta (command suggestions when an invalid command is used)</td>
<td>If this is not available then it tries to use thefuzz and if both are not installed it tries to use difflib</td>
</tr>
<tr>
<td>packaging</td>
<td>wheels, information (optional)</td>
<td>In the information command If this is not available then it uses distutils which is buggy at times</td>
</tr>
</tbody>
</table>
<h2 id="cache">Cache<a class="headerlink" href="#cache" title="Permanent link">&para;</a></h2>
<p>The library caches packages and refreshes them per day. it also caches web requests and responses if <code>requests-cache</code> is installed</p>
<p>For the packages cache it makes it so that the data doesn't need to be re-downloaded in the <code>regex-search</code> command. The data is around 2.75 mb (gzipped) when it's gotten from the web, and when it's stored locally as cache it takes around 5 mb.</p>
<p>For the web requests cache it stores the recent few web requests so that if you are using the same command again it doesn't load the data again. This cache is automatically shortened by removing specific urls from the cache after they have expired depending on the url. Currently these are the cache expiry durations for commands</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Duration</th>
</tr>
</thead>
<tbody>
<tr>
<td>browse</td>
<td>3 hours</td>
</tr>
<tr>
<td>description</td>
<td>3 hours if gotten from PyPI and 1 day if gotten from GitHub</td>
</tr>
<tr>
<td>information</td>
<td>3 hours</td>
</tr>
<tr>
<td>largest-files</td>
<td>1 day</td>
</tr>
<tr>
<td>new-packages</td>
<td>1 minute</td>
</tr>
<tr>
<td>new-releases</td>
<td>1 minute</td>
</tr>
<tr>
<td>new-releases</td>
<td>3 hours</td>
</tr>
<tr>
<td>regex-search</td>
<td>1 day</td>
</tr>
<tr>
<td>releases</td>
<td>3 hours</td>
</tr>
<tr>
<td>rtfd</td>
<td>No cache needed</td>
</tr>
<tr>
<td>wheels</td>
<td>3 hours</td>
</tr>
</tbody>
</table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../usage/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Usage" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Usage
            </div>
          </div>
        </a>
      
      
        
        <a href="../smart_features/" class="md-footer__link md-footer__link--next" aria-label="Next: Smart Features" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Smart Features
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 Arian Mollik Wasi
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/wasi-master" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tabs", "navigation.top", "header.autohide", "toc.integrate", "content.tabs.link"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.409db549.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56a63758.min.js"></script>
      
    
  </body>
</html>